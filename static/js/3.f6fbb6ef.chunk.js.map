{"version":3,"sources":["components/EditProfile/EditProfile.module.css","components/Common/SpanField/SpanField.module.css","components/Common/Dropzone/Dropzone.jsx","components/Common/SpanField/SpanField.jsx","components/EditProfile/EditProfile.jsx","utils/hoc/AuthRedirect.jsx","components/EditProfile/EditProfileContainer.jsx"],"names":["module","exports","Dropzone","props","useState","files","setFiles","useDropzone","accept","multiple","noDrag","onDrop","acceptedFiles","onChange","getRootProps","getInputProps","photo","setPhoto","useEffect","length","type","includes","URL","createObjectURL","photos","large","className","style","profilePhoto","src","alt","id","choosePhotoSpan","SpanField","validators","MaxLengthCreator","required","composeValidators","NotEmpty","isUrl","IsUrl","autoComplete","name","component","validate","input","meta","inputBlock","info","span","error","touched","placeholder","EditProfile","profile","userId","isFetching","LogoutFromAPI","ApplyChanges","saved","Preloader","Button","text","fullName","onSubmit","initialValues","status","lookingForAJob","lookingForAJobDescription","aboutMe","website","contacts","github","vk","youtube","facebook","twitter","instagram","mainLink","render","handleSubmit","values","form","photoContainer","choosePhotoInput","buttonsBlock","apply","value","to","onClick","mapStateToProps","state","isAuth","Auth","AuthRedirect","Component","connect","EditProfileContainer","React","memo","setSaved","useLayoutEffect","GetUser","SetStatus","SetPhoto","ChangeLogin","newProfileData","SetProfile","setTimeout","prevProps","nextProps","mapDispatchToProps","compose","Profile","isGettingFollowed"],"mappings":"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","file":"static/js/3.f6fbb6ef.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"EditProfile\":\"EditProfile_EditProfile__TB5L8\",\"photoContainer\":\"EditProfile_photoContainer__39Lp_\",\"choosePhotoSpan\":\"EditProfile_choosePhotoSpan__1HyfT\",\"choosePhotoInput\":\"EditProfile_choosePhotoInput__3ezpf\",\"profilePhoto\":\"EditProfile_profilePhoto__2gi28\",\"info\":\"EditProfile_info__XTu2R\",\"form\":\"EditProfile_form__2JE_-\",\"apply\":\"EditProfile_apply__1ocSw\",\"buttonsBlock\":\"EditProfile_buttonsBlock__2YDGf\",\"saved\":\"EditProfile_saved__2KSKv\",\"save\":\"EditProfile_save__1L6kA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"info\":\"SpanField_info__dT0ko\",\"inputBlock\":\"SpanField_inputBlock__35uAM\",\"input\":\"SpanField_input__LJgq_\"};","import React, {useEffect, useState} from \"react\";\r\nimport style from \"../../EditProfile/EditProfile.module.css\";\r\nimport {useDropzone} from \"react-dropzone\";\r\n\r\nexport let Dropzone = props => {\r\n    const [files, setFiles] = useState()\r\n    const {getRootProps, getInputProps} = useDropzone({\r\n        accept: \"image/*\",\r\n        multiple: false,\r\n        noDrag: true,\r\n        onDrop: (acceptedFiles) => {\r\n            const files = [...acceptedFiles]\r\n            setFiles(files);\r\n            if (props.onChange) {\r\n                props.onChange(files);\r\n            }\r\n        }}\r\n    );\r\n    const [photo,setPhoto]=useState()\r\n    useEffect(()=>{\r\n        if (files){\r\n            if (files.length===1 && !files[0].type.includes('gif')){\r\n                setPhoto(URL.createObjectURL(files[0]))\r\n            }\r\n        }\r\n        else {\r\n            let photo = props.photos.large ? props.photos.large : 'https://gotrening.com/wp-content/uploads/2021/04/user.png'\r\n            setPhoto(photo)\r\n        }\r\n    },[files])\r\n    return <div {...getRootProps({className: 'dropzone'})}><img\r\n        className={style.profilePhoto} src={photo}\r\n        alt=\"your profile image\"/><input className={\"choosePhotoInput\"} id={\"choosePhotoInput\"} {...getInputProps()}/><span className={style.choosePhotoSpan}>Выбрать фото</span></div>\r\n}","import React from 'react';\r\nimport {composeValidators, IsUrl, MaxLengthCreator, NotEmpty} from \"../../../utils/validators/fieldValidators\";\r\nimport style from \"./SpanField.module.css\";\r\nimport {Field} from \"react-final-form\";\r\n\r\nfunction SpanField(props) {\r\n    let validators=MaxLengthCreator(60)\r\n    if (props.required)\r\n        validators=composeValidators(NotEmpty,MaxLengthCreator(60))\r\n    if (props.isUrl)\r\n        validators=composeValidators(IsUrl,MaxLengthCreator(60))\r\n    return (\r\n        <Field autoComplete=\"off\" name={props.name} component={\"input\"} type={\"text\"}\r\n                validate={validators}>\r\n            {({ input, meta }) => (\r\n                <div className={style.inputBlock}>\r\n                    <div className={style.info}>\r\n                        <div>{props.span}:</div><div><input {...input} className={`${style.input} ${meta.error && meta.touched && \"errorInput\"}`} type=\"text\" autoComplete=\"false\" placeholder={props.placeholder || \"\"} /></div>\r\n                        {meta.error && meta.touched && <span className={`errorMessage ${style.info}`}>{meta.error}</span>}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </Field>\r\n    );\r\n}\r\n\r\nexport default SpanField;","import style from './EditProfile.module.css'\r\nimport React, {useEffect, useState} from \"react\";\r\nimport Preloader from \"../Common/Preloader/Preloader\";\r\nimport Button from \"../Common/Button/Button\";\r\nimport {NavLink, Redirect} from \"react-router-dom\";\r\nimport {Field, Form} from 'react-final-form'\r\nimport {Dropzone} from \"../Common/Dropzone/Dropzone\";\r\nimport SpanField from \"../Common/SpanField/SpanField\";\r\n\r\n\r\nlet EditProfile = ({profile, userId, isFetching, LogoutFromAPI, ApplyChanges, saved}) => {\r\n    if (!userId) {\r\n        return <Redirect to={\"/login\"}/>\r\n    }\r\n    if (isFetching) {\r\n        return <div className={`${style.EditProfile} backgroundBlock`}><Preloader/></div>\r\n    }\r\n    return <div className={`${style.EditProfile} backgroundBlock`}><Button text={profile.fullName}/>\r\n        <Form onSubmit={ApplyChanges}\r\n              initialValues={{\r\n                  status: profile.status,\r\n                  lookingForAJob: profile.lookingForAJob,\r\n                  fullName: profile.fullName,\r\n                  lookingForAJobDescription: profile.lookingForAJobDescription,\r\n                  aboutMe: profile.aboutMe,\r\n                  website: profile.contacts.website,\r\n                  github: profile.contacts.github,\r\n                  vk: profile.contacts.vk,\r\n                  youtube: profile.contacts.youtube,\r\n                  facebook: profile.contacts.facebook,\r\n                  twitter: profile.contacts.twitter,\r\n                  instagram: profile.contacts.instagram,\r\n                  mainLink: profile.contacts.mainLink,\r\n              }}\r\n              render={({handleSubmit, values}) => (\r\n                  <form className={style.form} onSubmit={handleSubmit}>\r\n                      <div className={style.photoContainer}>\r\n                          <Field name={\"photo\"} className={style.choosePhotoInput} component={\"input\"}\r\n                                 type=\"file\">{props => <Dropzone {...props.input} photos={profile.photos}/>}</Field>\r\n                      </div>\r\n                      <SpanField name={\"status\"} span={\"Статус\"}/>\r\n                      <SpanField name={\"aboutMe\"} span={\"Обо мне\"} required={true}/>\r\n                      <SpanField name={\"fullName\"} span={\"Полное имя\"} required={true}/>\r\n                      <SpanField name={\"website\"} span={\"Веб-сайт\"} isUrl={true}/>\r\n                      <SpanField name={\"github\"} span={\"GitHub\"} isUrl={true}/>\r\n                      <SpanField name={\"vk\"} span={\"ВК\"} isUrl={true}/>\r\n                      <SpanField name={\"youtube\"} span={\"Youtube\"} isUrl={true}/>\r\n                      <SpanField name={\"facebook\"} span={\"Facebook\"} isUrl={true}/>\r\n                      <SpanField name={\"twitter\"} span={\"Twitter\"} isUrl={true}/>\r\n                      <SpanField name={\"instagram\"} span={\"Instagram\"} isUrl={true}/>\r\n                      <SpanField name={\"mainLink\"} span={\"Дополнительная ссылка\"} isUrl={true}/>\r\n                      <div className={style.info}>Ищу работу: <Field className=\"checkbox\" name=\"lookingForAJob\"\r\n                                                                     component=\"input\" type=\"checkbox\"/></div>\r\n                      <SpanField name={\"lookingForAJobDescription\"} span={\"Профессиональные навыки\"} required={true}/>\r\n                      <div className={style.buttonsBlock}>\r\n                          <input type={\"submit\"} className={`${style.apply} Button`}\r\n                                 value=\"Сохранить\"/>\r\n                          <NavLink to={'/user/' + profile.userId+'/'}><input type={\"button\"}\r\n                                                                         className={`${style.apply} Button`}\r\n                                                                         value=\"Посмотреть мой профиль\"/></NavLink>\r\n                          <Button className={`${style.apply} Button`} onClick={LogoutFromAPI} text={\"Выйти\"}/>\r\n                          {saved ? <div className={style.saved}>Сохранено</div> : null}\r\n                      </div>\r\n                  </form>\r\n              )}/>\r\n    </div>\r\n}\r\nexport default EditProfile","import React from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {Redirect} from \"react-router-dom\";\r\nlet mapStateToProps=(state)=>({\r\n    isAuth: state.Auth.isAuth\r\n})\r\nlet AuthRedirect = (Component) =>{\r\n    let RedirectContainer = (props) =>{\r\n        if (!props.isAuth){\r\n            return <Redirect to={'login'}/>\r\n        }\r\n        return <Component {...props}/>\r\n    }\r\n    return connect(mapStateToProps)(RedirectContainer)\r\n}\r\nexport default AuthRedirect","import EditProfile from './EditProfile'\r\nimport {connect} from 'react-redux'\r\nimport React, {useEffect, useLayoutEffect, useState} from 'react'\r\nimport {compose} from \"redux\";\r\nimport {GetUser, SetStatus, SetPhoto, SetProfile} from \"../../Redux/ProfileReducer\";\r\nimport {ChangeLogin, LogoutFromAPI} from \"../../Redux/AuthReducer\";\r\nimport AuthRedirect from \"../../utils/hoc/AuthRedirect\";\r\n\r\nconst EditProfileContainer = React.memo((props) => {\r\n    const [saved, setSaved] = useState(false)\r\n    let ApplyChanges = (values) => {\r\n        if (values.status !== props.status) {\r\n            props.SetStatus(values.status)\r\n        }\r\n        if (values.photo) {\r\n            let photo = [...values.photo][0]\r\n            props.SetPhoto(photo)\r\n        }\r\n        if (props.profile.fullName!==values.fullName){\r\n            props.ChangeLogin(values.fullName)\r\n        }\r\n        let newProfileData = {\r\n            userId: props.userId,\r\n            lookingForAJob: values.lookingForAJob,\r\n            aboutMe: values.aboutMe,\r\n            lookingForAJobDescription: values.lookingForAJobDescription,\r\n            fullName: values.fullName,\r\n            contacts: {\r\n                github: values.github,\r\n                vk: values.vk,\r\n                facebook: values.facebook,\r\n                instagram: values.instagram,\r\n                twitter: values.twitter,\r\n                youtube: values.youtube,\r\n                mainLink: values.mainLink,\r\n                website: values.website\r\n            }\r\n        }\r\n        props.SetProfile(newProfileData)\r\n        setSaved(true)\r\n        setTimeout(() => {\r\n            setSaved(false)\r\n        }, 2000)\r\n    }\r\n    useLayoutEffect(() => {\r\n        props.GetUser(props.userId)\r\n    }, [props.userId]);\r\n\r\n    return (\r\n        <EditProfile {...props} saved={saved} ApplyChanges={ApplyChanges}/>\r\n    )\r\n}, (prevProps, nextProps) => prevProps.userId === nextProps.userId && prevProps.isFetching === nextProps.isFetching)\r\n\r\nlet mapStateToProps = (state) => ({\r\n    profile: state.Profile.profile,\r\n    userId: state.Auth.userId,\r\n    isFetching: state.Profile.isFetching,\r\n    isGettingFollowed: state.Profile.isGettingFollowed\r\n})\r\nlet mapDispatchToProps = {\r\n    GetUser,\r\n    SetStatus,\r\n    SetPhoto,\r\n    LogoutFromAPI,\r\n    SetProfile,\r\n    ChangeLogin\r\n}\r\nexport default compose(\r\n    connect(mapStateToProps, mapDispatchToProps),\r\n    AuthRedirect\r\n)(EditProfileContainer)"],"sourceRoot":""}